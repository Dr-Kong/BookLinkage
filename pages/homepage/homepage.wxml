<view class="container">
	<!-- Heading -->
	<view class="wid">
		<!-- Notifictions -->
		<text class="notice">注：具体交易价格以实际咨询为准</text>
		<!-- User Avatar -->
		<view class="wid">
			<view wx:if="{{a.globalData.userInfo != null}}" bindtap="bindViewTap" 
			class="userInputView">
				<image class="userInfo-avatar"
				   src="{{a.globalData.userInfo.avatarUrl}}"/>

				<!-- Search Bar -->
				<view class="inputView">
					<view class="space"></view>
					<input value="{{keywords}}"
					maxlength="-1"
					disabled="{{isFocus == false}}"
					placeholder="输入书本名称（请用空格分隔关键词）"
					confirm-type="search"
					bindinput="searchByKeywords"
					bindconfirm='hideKeyboard'/>
				</view>
			</view>
			<view wx:else
				bindgetuserinfo="setUserInfo" class="userInputView">
				<image class="userInfo-avatar"
					src="../../icons/_starred.png" />

				<!-- Search Bar-->
				<view class="inputView">
					<view class="space"></view>
					<input value="{{keywords}}"
					maxlength="-1"
					disabled="{{isFocus == false}}"
					placeholder="输入书本名称（请用空格分隔关键词)"
					placeholder-class="PHC"
					confirm-type="search"
					bindinput="searchByKeywords"
					bindconfirm='hideKeyboard'
					class="input"/>
				</view>
			</view>

		</view>
		
		<text wx:if="{{isFocus}}" bindtap="cancelSearch">
			取消
		</text>
	</view>
	<!-- Tags selecting -->
	<view wx:if="isFocus != true">
		<expandable-list title-class=''
			contents-class=''
			title='选择科目及出版商'>
			<picker-view indicator-style="height: 50px;"
				style="width: 500rpx; height: 300px;"
				value="{{[sbj, pub]}}"
				bindchange="searchByTags">
				<!-- subject -->
				<picker-view-column>
					<view wx:for="{{_sbjList}}"
						wx:key='index'
						style="line-height: 50px">
						{{item}}
					</view>
				</picker-view-column>
				<!-- publisher -->
				<picker-view-column>
					<view wx:for="{{pubList}}"
						wx:key='index'
						style="line-height: 50px">
						{{item}}
					</view>
				</picker-view-column>
			</picker-view>
		</expandable-list>
		<text wx:if="{{isFocus == false}}" bindtap="cancelSearch">
			取消
		</text>
	</view>
	<!-- Books Item -->
	<navigator wx:for="{{bl}}"
		wx:key='index'
		wx:if="{{item._openid != a.globalData.openID}}"
		url="{{'../book/book?bkID=' + bl[index]._id + '&type=0'}}">
		<image src="{{item.fileID[0]}}" mode="aspectFill" lazy-load="{{true}}" />
		<!-- Book Name -->
		<text>{{item.bkName}}</text>
		<!-- Legal -->
		<text>{{item.isLegal ? '正版书籍' : ''}}</text>
		<!-- Additional Info -->
		<text>{{item.additionalInfo}}</text>
		<!-- Price -->
		<text>{{' ￥ ' + item.price}}</text>
	</navigator>
</view>